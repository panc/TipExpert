<div class="container">
    
    <div class="row">
        <h1>{{ game.title }}</h1>
        <p class="game-description">{{ game.description }}</p>
    </div>

    <div class="game-stake row">
        
        <p class="left">Your Stake:</p>

        <div ng-show="!editStake">
            <p class="stake-text left">{{ game.player.stake }}</p>
            <div class="edit-stake-button left" ng-click="editStake = true">Edit...</div>
        </div>

        <form name="stakeForm" class="stake-form left" ng-show="editStake" novalidate>

            <div class="input-group" ng-class="{ 'has-error' : stakeForm.stake.$invalid && submitted }">
                <div class="left">
                    <input type="number" name="stake" ng-model="stake" class="form-control" required min="{{ minStake }}">
                </div>

                <span class="input-group-btn left">
                    <button class="btn btn-default" type="button" ng-click="saveStake()"><span class="glyphicon glyphicon-ok"></span></button>
                    <button class="btn btn-default" type="button" ng-click="cancelEditStake()"><span class="glyphicon glyphicon-remove"></span></button>
                </span>

                <div class="left">
                    <p ng-show="stakeForm.stake.$invalid && submitted" class="help-block">A stake with a minimum of {{ minStake }} coins is required!</p>
                </div>
            </div>
        </form>
        
        <div class="clear"></div>
    </div>


    <div class="game-participants row">
        <h3 translate="GAME-PARTICIPANTS"></h3>
        <ul>
            <li ng-repeat="player in game.allPlayers">
                <img class="left" ng-src="{{ player.picture }}" alt="avatar" height="40" ng-hide="{{ !player.picture }}" />
                <div class="left">{{ player.name }}</div>
                <div class="left" ng-show="game.isFinished">(Total points: {{ player.totalPoints }})</div>
                <div class="clear">
                </div>
            </li>
        </ul>
    </div>
 

    <div class="game-tips row">
        <h3 translate="GAME-TIPS"></h3>
    </div>
        
    <div class="row" ng-show="notFinishedGames.length > 0">
        <h4>Upcomming Games</h4>
        <table>
            <tr ng-repeat="tip in notFinishedGames = (game.player.tips | filter:{ finished: false })"
                ng-init="tip.oldHomeTip = tip.homeTip; tip.oldGuestTip = tip.guestTip">

                <td class="game-tip-team-col">{{ tip.homeTeam }}</td>
                <td>&nbsp; - &nbsp;</td>
                <td class="game-tip-team-col">{{ tip.guestTeam }}</td>
                <td class="game-tip-score-left-col">
                    <input type="text" class="form-control game-tip-score" ng-model="tip.homeTip"
                           ng-change="tip.showSaveButton = true" />
                </td>
                <td>&nbsp; : &nbsp;</td>
                <td>
                    <input type="text" class="form-control game-tip-score" ng-model="tip.guestTip"
                           ng-change="tip.showSaveButton = true" />
                </td>
                <td ng-show="tip.showSaveButton">
                    <span class="input-group-btn left">
                        <button class="btn btn-default" type="button" ng-click="saveTip(tip)"><span class="glyphicon glyphicon-ok"></span></button>
                        <button class="btn btn-default" type="button" ng-click="cancelTipEditing(tip)"><span class="glyphicon glyphicon-remove"></span></button>
                    </span>
                </td>
            </tr>
        </table>
    </div>
        
    <div class="row" ng-show="finishedGames.length > 0">
        <h4>Finished Games</h4>
        <table>
            <tr ng-repeat="tip in finishedGames = (game.player.tips | filter:{ finished: true })">
                <td class="game-tip-team-col">{{ tip.homeTeam }}</td>
                <td>&nbsp; - &nbsp;</td>
                <td class="game-tip-team-col">{{ tip.guestTeam }}</td>
                <td class="game-tip-score-left-col">{{ tip.homeTip }}</td>
                <td>&nbsp; : &nbsp;</td>
                <td>{{ tip.guestTip }}</td>
                <td class="game-tip-result-left-col">({{ tip.homeResult }}&nbsp; : &nbsp;{{ tip.guestResult }})</td>
                <td class="game-tip-result-left-col">Points: {{ tip.points }}</td>
            </tr>
        </table>

        <div ng-show="game.isFinished">
            <div>(Total points: {{ game.player.totalPoints }})</div>
            <div>(Earned profit: {{ game.player.profit }})</div>
        </div>
    </div>
    
    <div class="form-group buttonbar-offset row">
        <a ui-sref="games.overview" title="back" class="btn-default btn">Back</a>
    </div>
</div>
